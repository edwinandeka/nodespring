{"version":3,"sources":["../../src/decorators/controller.js"],"names":["Controller","basePackagePath","path","dirname","NodeSpringUtil","getStack","replace","ModuleContainer","appDir","args","arguments","options","addModule","target","packagePath","name","moduleType","addController","namespace","length","isClass","type"],"mappings":";;;;;QAUgBA,U,GAAAA,U;;AALhB;;;;AACA;;;;AACA;;;;;;AAGO,SAASA,UAAT,GAAsB;;AAE3B,MAAIC,kBAAkBC,eAAKC,OAAL,CAAaC,yBAAeC,QAAf,GAA0BC,OAA1B,CAAkCC,0BAAgBC,MAAlD,EAA0D,EAA1D,EAA8DF,OAA9D,CAAsE,KAAtE,EAA6E,EAA7E,CAAb,CAAtB;;AAEA,MAAIG,OAAOC,UAAU,CAAV,CAAX;AACA,MAAIC,UAAU,EAAd;;AAEA,MAAIC,YAAY,SAAZA,SAAY,CAACC,MAAD,EAAY;AAC1B,QAAIC,cAAcb,kBAAkB,GAAlB,GAAwBY,OAAOE,IAAjD;;AAEAF,WAAOC,WAAP,GAAqBA,WAArB;AACAD,WAAOG,UAAP,GAAoB,YAApB;AACAT,8BAAgBU,aAAhB,CAA8BJ,MAA9B,EAAsCF,QAAQT,IAAR,IAAgBW,OAAOE,IAA7D,EAAmEJ,QAAQO,SAAR,IAAqBL,OAAOE,IAA/F;AACD,GAND;;AAQA,MAAGL,UAAUS,MAAV,KAAqB,CAArB,IAA2BT,UAAUS,MAAV,KAAqB,CAArB,IAA0B,CAACf,yBAAegB,OAAf,CAAuBV,UAAU,CAAV,CAAvB,CAAzD,EAAgG;AAC9FC,cAAUD,UAAU,CAAV,KAAgB,EAA1B;AACA,WAAOE,SAAP;AACD,GAHD,MAGO;AACL,QAAIC,SAASH,UAAU,CAAV,CAAb;AACAG,WAAOQ,IAAP,GAAc,YAAd;;AAEAT,cAAUC,MAAV;AACD;AACF,C,CAlCD","file":"controller.js","sourcesContent":["/**\n * Controller decorator\n * @author calbertts\n */\n\nimport ModuleContainer from '../core/ModuleContainer'\nimport NodeSpringUtil from '../core/NodeSpringUtil'\nimport path from 'path'\n\n\nexport function Controller() {\n\n  let basePackagePath = path.dirname(NodeSpringUtil.getStack().replace(ModuleContainer.appDir, '').replace('.js', ''))\n\n  let args = arguments[0]\n  let options = {}\n\n  let addModule = (target) => {\n    let packagePath = basePackagePath + '/' + target.name\n\n    target.packagePath = packagePath\n    target.moduleType = 'controller'\n    ModuleContainer.addController(target, options.path || target.name, options.namespace || target.name)\n  }\n\n  if(arguments.length === 0 || (arguments.length === 1 && !NodeSpringUtil.isClass(arguments[0]))) {\n    options = arguments[0] || {}\n    return addModule\n  } else {\n    let target = arguments[0]\n    target.type = 'controller'\n\n    addModule(target)\n  }\n}\n"]}