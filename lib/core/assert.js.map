{"version":3,"sources":["../../src/core/assert.js"],"names":["util","require","pSlice","Array","prototype","slice","hasOwn","Object","hasOwnProperty","assert","module","exports","ok","AssertionError","options","name","actual","expected","operator","message","generatedMessage","getMessage","stackStartFunction","fail","Error","stackTraceLimit","captureStackTrace","err","stack","out","fn_name","idx","indexOf","next_line","substring","inherits","replacer","key","value","isUndefined","isNumber","isFinite","toString","isFunction","isRegExp","truncate","s","n","isString","length","self","JSON","stringify","lastStack","throwOnFail","error","equal","notEqual","deepEqual","_deepEqual","isBuffer","i","isDate","getTime","source","global","multiline","lastIndex","ignoreCase","isObject","objEquiv","isArguments","object","call","a","b","isNullOrUndefined","isPrimitive","aIsArgs","bIsArgs","ka","objectKeys","kb","sort","notDeepEqual","strictEqual","notStrictEqual","expectedException","test","_throws","shouldThrow","block","e","throws","apply","concat","arguments","doesNotThrow","ifError","keys","obj","push"],"mappings":"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","file":"assert.js","sourcesContent":["// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// when used in node, this will actually load the util module we depend on\n// versus loading the builtin util module as happens otherwise\n// this is a bug in node module loading as far as I am concerned\nvar util = require('util/');\n\nvar pSlice = Array.prototype.slice;\nvar hasOwn = Object.prototype.hasOwnProperty;\n\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n\n  Error.stackTraceLimit = 2\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  }\n  else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = stackStartFunction.name;\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction replacer(key, value) {\n  if (util.isUndefined(value)) {\n    return '' + value;\n  }\n  if (util.isNumber(value) && !isFinite(value)) {\n    return value.toString();\n  }\n  if (util.isFunction(value) || util.isRegExp(value)) {\n    return value.toString();\n  }\n  return value;\n}\n\nfunction truncate(s, n) {\n  if (util.isString(s)) {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\n\nfunction getMessage(self) {\n  return truncate(JSON.stringify(self.actual, replacer), 128) + ' ' +\n    self.operator + ' ' +\n    truncate(JSON.stringify(self.expected, replacer), 128);\n}\n\nassert.lastStack = null\nassert.throwOnFail = false\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  var error = new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  })\n\n  if(assert.throwOnFail) {\n    throw error\n  } else {\n    assert.lastStack = error.stack\n  }\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (util.isBuffer(actual) && util.isBuffer(expected)) {\n    if (actual.length != expected.length) return false;\n\n    for (var i = 0; i < actual.length; i++) {\n      if (actual[i] !== expected[i]) return false;\n    }\n\n    return true;\n\n    // 7.2. If the expected value is a Date object, the actual value is\n    // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n    // 7.3 If the expected value is a RegExp object, the actual value is\n    // equivalent if it is also a RegExp object with the same source and\n    // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n      actual.global === expected.global &&\n      actual.multiline === expected.multiline &&\n      actual.lastIndex === expected.lastIndex &&\n      actual.ignoreCase === expected.ignoreCase;\n\n    // 7.4. Other pairs that do not both pass typeof value == 'object',\n    // equivalence is determined by ==.\n  } else if (!util.isObject(actual) && !util.isObject(expected)) {\n    return actual == expected;\n\n    // 7.5 For all other Object pairs, including Array objects, equivalence is\n    // determined by having the same number of owned properties (as verified\n    // with Object.prototype.hasOwnProperty.call), the same set of keys\n    // (although not necessarily the same order), equivalent values for every\n    // corresponding key, and an identical 'prototype' property. Note: this\n    // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b) {\n  if (util.isNullOrUndefined(a) || util.isNullOrUndefined(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b)) {\n    return a === b;\n  }\n  var aIsArgs = isArguments(a),\n    bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b);\n  }\n  var ka = objectKeys(a),\n    kb = objectKeys(b),\n    key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key])) return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  } else if (actual instanceof expected) {\n    return true;\n  } else if (expected.call({}, actual) === true) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (util.isString(expected)) {\n    message = expected;\n    expected = null;\n  }\n\n  try {\n    block();\n  } catch (e) {\n    actual = e;\n  }\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n    (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  if (!shouldThrow && expectedException(actual, expected)) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n    !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws.apply(this, [true].concat(pSlice.call(arguments)));\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/message) {\n  _throws.apply(this, [false].concat(pSlice.call(arguments)));\n};\n\nassert.ifError = function(err) { if (err) {throw err;}};\n\nvar objectKeys = Object.keys || function (obj) {\n    var keys = [];\n    for (var key in obj) {\n      if (hasOwn.call(obj, key)) keys.push(key);\n    }\n    return keys;\n  };\n"]}